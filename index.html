<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpotKin - AI Monitoring for Pets and Babies</title>
    
    <!-- PWA Meta Tags -->
    <meta name="application-name" content="SpotKin">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="SpotKin">
    <meta name="description" content="Instant pet & baby monitoring - no downloads needed! Open browser, point camera, get voice alerts. Perfect for pet-sitting or quick errands.">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#4f46e5">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="theme-color" content="#4f46e5">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://cdnjs.cloudflare.com https://js.puter.com; style-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://cdnjs.cloudflare.com; img-src 'self' data: blob:; connect-src 'self' https://api.puter.com https://puter.com; font-src 'self' https://cdnjs.cloudflare.com; media-src 'self' blob:; worker-src 'self'; frame-ancestors 'none'; form-action 'self'; base-uri 'self'">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Performance Optimizations: DNS Prefetch for external resources -->
    <link rel="dns-prefetch" href="//cdn.tailwindcss.com">
    <link rel="dns-prefetch" href="//js.puter.com">
    <link rel="dns-prefetch" href="//api.puter.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    
    <!-- Performance Optimizations: Preload critical resources -->
    <link rel="preload" href="app.js" as="script">
    <link rel="preload" href="utils/security.js" as="script">
    <link rel="preload" href="utils/secure-storage.js" as="script">
    
    <!-- Critical CSS Framework - Load immediately for UI -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome for icons - Load early for UI elements -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Critical Security Modules - Load immediately for data protection -->
    <script src="utils/security.js"></script>
    <script src="utils/secure-storage.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- PWA Icons -->
    <link rel="icon" href="./images/favicon.png">
    <link rel="apple-touch-icon" href="./images/apple-icon-180.png">
    <link rel="mask-icon" href="./images/favicon.svg" color="#4f46e5">
</head>
<body class="bg-gray-100 min-h-screen font-sans">
    <!-- PWA Splash Screen -->
    <div id="pwa-splash" class="pwa-splash">
        <div class="splash-logo">
            <i class="fas fa-eye"></i>
        </div>
        <div class="splash-title">SpotKin</div>
        <div class="splash-subtitle">Instant monitoring - no downloads needed</div>
        <div class="splash-spinner"></div>
    </div>
    
    <!-- Header -->
    <header class="bg-indigo-700 text-white shadow-md relative">
        <div class="container mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center">
                <i class="fas fa-eye text-2xl mr-3"></i>
                <h1 class="text-xl font-bold">SpotKin</h1>
            </div>
            
            <!-- Desktop Navigation -->
            <nav class="hidden md:block">
                <ul class="flex space-x-6">
                    <li><a href="#features" class="hover:text-indigo-200 transition-colors duration-200 text-sm font-medium">Features</a></li>
                    <li><a href="#demo" class="hover:text-indigo-200 transition-colors duration-200 text-sm font-medium">Try It</a></li>
                    <li><a href="#about" class="hover:text-indigo-200 transition-colors duration-200 text-sm font-medium">About</a></li>
                </ul>
            </nav>

            <!-- Mobile Navigation Toggle -->
            <button id="mobile-menu-toggle" class="md:hidden flex items-center justify-center w-10 h-10 rounded-lg hover:bg-indigo-600 transition-colors duration-200">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>

        <!-- Mobile Navigation Menu -->
        <div id="mobile-menu" class="md:hidden bg-indigo-800 border-t border-indigo-600 hidden">
            <nav class="container mx-auto px-4 py-3">
                <ul class="space-y-3">
                    <li><a href="#features" class="block py-3 px-4 hover:bg-indigo-700 rounded-lg transition-colors duration-200 text-base font-medium">Features</a></li>
                    <li><a href="#demo" class="block py-3 px-4 hover:bg-indigo-700 rounded-lg transition-colors duration-200 text-base font-medium">Try Demo</a></li>
                    <li><a href="#about" class="block py-3 px-4 hover:bg-indigo-700 rounded-lg transition-colors duration-200 text-base font-medium">About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section bg-gradient-to-b from-indigo-800 to-indigo-600 text-white py-16">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-2xl md:text-4xl font-bold mb-4">Instant Pet & Baby Monitoring</h2>
            <p class="text-xl max-w-3xl mx-auto mb-8">
                Pet-sitting at a friend's house? Need to step away for a moment? Open SpotKin in your browser, 
                point your camera, and get voice alerts instantly. No apps to download, no accounts to create.
            </p>
            <div class="flex justify-center">
                <a href="#demo" class="bg-white text-indigo-700 px-6 py-3 rounded-full font-semibold hover:bg-indigo-100 focus:ring-4 focus:ring-white focus:ring-opacity-50 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl mr-4">
                    Try the Demo
                </a>
                <a href="#features" class="border-2 border-white text-white px-6 py-3 rounded-full font-semibold hover:bg-indigo-700 hover:bg-opacity-20 focus:ring-4 focus:ring-white focus:ring-opacity-30 transition-all duration-300 transform hover:scale-105 backdrop-blur-sm">
                    Learn More
                </a>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="section-mobile py-20 bg-gradient-to-br from-gray-50 to-indigo-50 dark:from-gray-800 dark:to-gray-900">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="section-title text-4xl font-bold text-gray-800 dark:text-gray-100 mb-4">Key Features</h2>
                <p class="text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">Discover what makes SpotKin the perfect monitoring solution for modern families</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8 max-w-6xl mx-auto">
                <!-- Feature 1 -->
                <div class="feature-card group bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-700 hover:border-indigo-200 dark:hover:border-indigo-400">
                    <div class="bg-gradient-to-br from-indigo-500 to-purple-600 text-white text-5xl mb-6 w-16 h-16 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100 group-hover:text-indigo-700 dark:group-hover:text-indigo-300 transition-colors">Instant Setup</h3>
                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
                        Open your browser, point your camera, and start monitoring immediately. No apps to download, 
                        no accounts to create, no complicated setup.
                    </p>
                </div>
                
                <!-- Feature 2 -->
                <div class="feature-card group bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-700 hover:border-green-200 dark:hover:border-green-400">
                    <div class="bg-gradient-to-br from-green-500 to-teal-600 text-white text-5xl mb-6 w-16 h-16 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg">
                        <i class="fas fa-volume-up"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100 group-hover:text-green-700 dark:group-hover:text-green-300 transition-colors">Voice Alerts</h3>
                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
                        Get spoken alerts for urgent situations. Perfect for when you're in another room - 
                        hear important notifications while focused on other tasks!
                    </p>
                </div>
                
                <!-- Feature 3 -->
                <div class="feature-card group bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-700 hover:border-blue-200 dark:hover:border-blue-400">
                    <div class="bg-gradient-to-br from-blue-500 to-indigo-600 text-white text-5xl mb-6 w-16 h-16 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg">
                        <i class="fas fa-lock"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4 text-gray-800 dark:text-gray-100 group-hover:text-blue-700 dark:group-hover:text-blue-300 transition-colors">Privacy-First Design</h3>
                    <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
                        Processing happens on your device, with minimal data sharing. No constant video
                        uploading or privacy concerns.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Use Cases Section -->
    <section class="py-16 bg-indigo-50 dark:bg-gray-800">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12 text-gray-800 dark:text-gray-100">Perfect For These Situations</h2>
            
            <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <!-- Pet-sitting scenario -->
                <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md">
                    <div class="text-indigo-600 dark:text-indigo-400 text-3xl mb-4">
                        <i class="fas fa-home"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Pet-Sitting at Friends</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4">
                        Watching your friend's pet but need to step into another room? Set up your phone camera, 
                        enable voice alerts, and go. If the pet gets into trouble, you'll hear it immediately.
                    </p>
                    <div class="text-sm text-indigo-600 dark:text-indigo-400 font-medium">
                        ‚úì No downloads on their device  ‚Ä¢  ‚úì Works instantly  ‚Ä¢  ‚úì Voice alerts from other rooms
                    </div>
                </div>

                <!-- Quick errands -->
                <div class="bg-white dark:bg-gray-700 p-6 rounded-lg shadow-md">
                    <div class="text-indigo-600 dark:text-indigo-400 text-3xl mb-4">
                        <i class="fas fa-baby"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Quick Errands & Breaks</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4">
                        Need to grab something from the car or answer the door? Position your phone and 
                        get instant alerts if your baby or pet needs attention.
                    </p>
                    <div class="text-sm text-indigo-600 dark:text-indigo-400 font-medium">
                        ‚úì Temporary monitoring  ‚Ä¢  ‚úì Smart alerts only  ‚Ä¢  ‚úì Privacy-first (no cloud storage)
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Demo Section -->
    <section id="demo" class="demo-section py-20 bg-gradient-to-br from-gray-800 via-gray-900 to-indigo-900">
        <div class="container mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-white mb-4">Live Demo</h2>
                <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                    Experience SpotKin's AI-powered monitoring in real-time. Point your camera at anything and watch our intelligent analysis in action.
                </p>
            </div>
            
            <!-- Demo Container: Responsive grid layout - portrait: stacked, landscape: side-by-side -->
            <div class="demo-container max-w-7xl mx-auto grid grid-cols-1 xl:grid-cols-2 gap-6 xl:gap-8">
                <!-- Camera View -->
                <div class="bg-gradient-to-br from-gray-700 to-gray-800 p-4 sm:p-6 rounded-3xl shadow-2xl border border-gray-600 backdrop-blur-sm">
                    <div class="flex items-center justify-between mb-4 sm:mb-6">
                        <h3 class="text-xl sm:text-2xl font-bold text-white">Camera Feed</h3>
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                            <span class="text-sm text-gray-300">LIVE</span>
                        </div>
                    </div>
                    <div id="camera-container" class="bg-gradient-to-br from-gray-900 to-black aspect-video relative rounded-2xl overflow-hidden border-2 border-gray-600 shadow-inner">
                        <video id="camera" playsinline autoplay muted class="absolute inset-0 w-full h-full object-cover"></video>
                        <div id="camera-feedback" class="absolute inset-0 flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900">
                            <div class="text-center text-gray-400">
                                <div class="relative mb-4">
                                    <i class="fas fa-camera text-6xl opacity-50"></i>
                                    <div class="absolute -top-2 -right-2 w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center">
                                        <i class="fas fa-plus text-xs text-white"></i>
                                    </div>
                                </div>
                                <p class="text-lg font-medium">Camera Initializing...</p>
                                <p class="text-sm opacity-75">Click to allow camera access</p>
                            </div>
                        </div>
                        
                        <!-- Monitoring Zone Overlay -->
                        <div id="zone-overlay" class="absolute inset-0 pointer-events-none hidden">
                            <svg id="zone-svg" class="absolute inset-0 w-full h-full">
                                <!-- Monitoring zones will be drawn here -->
                            </svg>
                        </div>
                        
                        <div id="camera-controls" class="absolute bottom-3 right-3 sm:bottom-4 sm:right-4 flex flex-col space-y-2">
                            <button id="voice-alerts-toggle" class="bg-green-600 text-white p-3 sm:p-3 rounded-full shadow-lg hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200 w-12 h-12 sm:w-auto sm:h-auto flex items-center justify-center" title="Toggle Voice Alerts">
                                <i class="fas fa-volume-up text-sm"></i>
                            </button>
                            <button id="take-snapshot" class="bg-indigo-600 text-white p-3 sm:p-3 rounded-full shadow-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 w-12 h-12 sm:w-auto sm:h-auto flex items-center justify-center">
                                <i class="fas fa-camera text-sm"></i>
                            </button>
                        </div>
                        <div class="absolute top-2 left-2 sm:top-3 sm:left-3">
                            <span id="ai-status" class="text-xs bg-black bg-opacity-50 text-white px-2 py-1 rounded-full hidden">
                                <i class="fas fa-robot mr-1"></i><span class="hidden sm:inline">AI Ready</span><span class="sm:hidden">AI</span>
                            </span>
                        </div>
                        <div class="absolute top-2 right-2">
                            <button id="zone-toggle" class="text-xs bg-black bg-opacity-50 text-white px-2 py-1 rounded-full hover:bg-opacity-70 hidden">
                                <i class="fas fa-vector-square mr-1"></i><span id="zone-status">Setup Zone</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Camera Controls at bottom of camera feed -->
                    <div class="mt-4">
                        <button id="toggle-camera" class="w-full bg-gradient-to-r from-gray-600 to-gray-700 text-white px-6 py-3 rounded-xl hover:from-gray-500 hover:to-gray-600 focus:ring-2 focus:ring-gray-400 transition-all duration-200 transform hover:scale-[1.02] font-medium shadow-lg text-base">
                            <i class="fas fa-sync-alt mr-2"></i>Switch Camera
                        </button>
                    </div>
                </div>

                <!-- Controls & Analysis Container -->
                <div class="bg-gradient-to-br from-gray-700 to-gray-800 p-4 sm:p-6 rounded-3xl shadow-2xl border border-gray-600 backdrop-blur-sm">
                    <!-- Monitoring Controls -->
                    <div class="monitoring-controls mb-6">
                        
                        <div class="bg-gradient-to-r from-gray-800 to-gray-900 p-4 rounded-xl border border-gray-600">
                            <div class="flex flex-col gap-3 sm:flex-row sm:items-center">
                                <button id="toggle-monitoring" class="w-full sm:flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 sm:py-3 rounded-xl hover:from-indigo-500 hover:to-purple-500 focus:ring-2 focus:ring-indigo-400 transition-all duration-200 transform hover:scale-[1.02] font-medium shadow-lg text-base">
                                    <i class="fas fa-play mr-2"></i><span id="monitoring-status-text">Start Monitoring</span>
                                </button>
                                <div class="flex items-center justify-center bg-gray-700 px-4 py-3 sm:py-2 rounded-xl border border-gray-600 min-w-0 sm:min-w-max">
                                    <label for="refresh-rate" class="text-sm text-gray-300 mr-3 font-medium whitespace-nowrap">Refresh:</label>
                                <select id="refresh-rate" class="bg-white border border-gray-300 text-gray-700 rounded-md px-2 py-1 text-sm">
                                    <option value="5000">5s</option>
                                    <option value="10000" selected>10s</option>
                                    <option value="15000">15s</option>
                                    <option value="30000">30s</option>
                                    <option value="60000">60s</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Scene Analysis Section -->
                    <div id="results-container" class="mt-6">
                        <div class="flex flex-col mb-6 space-y-4">
                            <!-- Scene Analysis Title -->
                            <div class="flex items-center">
                                <div class="w-3 h-3 bg-green-400 rounded-full mr-3 animate-pulse"></div>
                                <h3 class="text-xl sm:text-2xl font-bold text-white">Scene Analysis</h3>
                            </div>
                            
                            <!-- Tab Navigation -->
                            <div class="flex bg-gray-600 rounded-xl overflow-hidden border border-gray-500 w-full sm:max-w-xs">
                                <button id="tab-current" class="flex-1 px-4 py-2 bg-indigo-600 text-white font-medium transition-all duration-200 hover:bg-indigo-700 hover:text-white text-sm">Current</button>
                                <button id="tab-history" class="flex-1 px-4 py-2 bg-gray-100 text-gray-700 font-medium transition-all duration-200 hover:bg-gray-300 hover:text-gray-800 text-sm">History</button>
                            </div>
                            
                            <!-- Action Buttons -->
                            <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                                <button id="preferences-btn" onclick="console.log('üîß INLINE: Settings clicked!'); showPreferencesModal();" class="bg-gray-600 hover:bg-gray-500 text-gray-300 hover:text-white px-4 py-3 rounded-xl text-sm transition-all duration-200 transform hover:scale-105 border border-gray-500 flex items-center justify-center">
                                    <i class="fas fa-cog mr-2"></i>Settings
                                </button>
                                <button id="setup-wizard-btn" class="bg-purple-600 hover:bg-purple-500 text-white px-4 py-3 rounded-xl text-sm transition-all duration-200 transform hover:scale-105 shadow-lg flex items-center justify-center">
                                    <i class="fas fa-magic mr-2"></i>Setup
                                </button>
                                <button id="help-btn" class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-3 rounded-xl text-sm transition-all duration-200 transform hover:scale-105 shadow-lg flex items-center justify-center col-span-2 sm:col-span-1">
                                    <i class="fas fa-question-circle mr-2"></i>Help
                                </button>
                            </div>
                        </div>
                    
                    <!-- Current Analysis Tab -->
                    <div id="current-tab" class="transition-opacity duration-300 ease-in-out">
                        <div id="results-placeholder" class="bg-gradient-to-br from-gray-800 to-gray-900 p-8 rounded-2xl text-center border border-gray-600">
                            <div class="relative mb-4">
                                <i class="fas fa-search text-5xl text-gray-500 opacity-50"></i>
                                <div class="absolute -top-1 -right-1 w-5 h-5 bg-indigo-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-robot text-xs text-white"></i>
                                </div>
                            </div>
                            <p class="text-gray-300 text-lg font-medium mb-2">Ready for AI Analysis</p>
                            <p class="text-gray-400 text-sm">Capture an image to see real-time analysis of what's happening in the scene.</p>
                        </div>
                        <div id="analysis-results" class="hidden">
                            <div id="scene-description" class="p-4 bg-indigo-50 rounded-md mb-4">
                                <h4 class="font-semibold text-lg text-indigo-700 mb-2">Scene Description</h4>
                                <p id="scene-text" class="text-gray-800"></p>
                            </div>
                            <div id="detection-results" class="mb-4">
                                <h4 class="font-semibold text-lg mb-2">Detected Subjects</h4>
                                <ul id="detection-list" class="space-y-2"></ul>
                            </div>
                            <div id="safety-assessment-display" class="p-4 rounded-md mb-4">
                                <h4 class="font-semibold text-lg mb-2">Safety Assessment</h4>
                                <p id="safety-level" class="font-bold text-lg"></p>
                                <p id="safety-reason" class="text-gray-700"></p>
                            </div>
                            <div id="alert-status" class="p-4 rounded-md"></div>
                        </div>
                    </div>
                    
                    <!-- History Tab -->
                    <div id="history-tab" class="transition-opacity duration-300 ease-in-out hidden">
                        <div class="flex justify-between mb-3">
                            <h4 class="font-semibold text-lg">Event Timeline</h4>
                            <button id="clear-history" class="text-xs text-red-600 hover:text-red-800">
                                <i class="fas fa-trash-alt mr-1"></i>Clear
                            </button>
                        </div>
                        <div id="history-empty" class="bg-gray-100 p-6 rounded-md text-center">
                            <i class="fas fa-history text-4xl text-gray-400 mb-3"></i>
                            <p class="text-gray-500">No monitoring history available yet.</p>
                        </div>
                        <div id="timeline-container" class="hidden">
                            <div id="timeline-list" class="space-y-3 pl-8 relative">
                                <!-- Timeline items will be inserted here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-16 bg-white dark:bg-gray-900">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-8 text-gray-800 dark:text-gray-100">About SpotKin</h2>
            <div class="max-w-3xl mx-auto">
                <p class="text-gray-600 dark:text-gray-300 mb-4">
                    SpotKin was born from a vision to give every parent and caregiver true peace of mind through smart, caring eyes.
                    We believe that an ordinary smartphone can become an intelligent guardian, silently watching over babies,
                    pets, and homes with the sensitivity and understanding of a trusted sitter.
                </p>
                <p class="text-gray-600 dark:text-gray-300 mb-4">
                    Our mission is to transform off-the-shelf devices into AI-powered "nannies" that see and understand the scene.
                    By combining on-device computer vision with semantic analysis, we deliver only meaningful alerts and 
                    replace frantic checking with calm confidence.
                </p>
                <p class="text-gray-600 dark:text-gray-300">
                    We are committed to privacy-first design, processing data locally with minimal sharing,
                    and to adaptive, trustworthy alerts that reduce anxiety and alert fatigue.
                </p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <div class="flex items-center">
                        <i class="fas fa-eye text-xl mr-2"></i>
                        <span class="text-lg font-bold">SpotKin</span>
                    </div>
                    <p class="text-sm text-gray-400 mt-1">Smart, caring eyes for your loved ones</p>
                </div>
                <div class="flex space-x-4">
                    <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
            <div class="mt-6 text-center">
                <!-- Legal Links -->
                <div class="flex justify-center space-x-6 mb-4 text-sm">
                    <a href="privacy-policy.html" class="text-gray-400 hover:text-white transition-colors">Privacy Policy</a>
                    <a href="terms-of-service.html" class="text-gray-400 hover:text-white transition-colors">Terms of Service</a>
                    <a href="cookie-policy.html" class="text-gray-400 hover:text-white transition-colors">Cookie Policy</a>
                </div>
                <p class="text-sm text-gray-400">&copy; 2024 SpotKin. All rights reserved. Built with privacy and security first.</p>
            </div>
        </div>
    </footer>

    <!-- Preferences Modal -->
    <div id="preferences-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full max-h-full overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b">
                <h3 class="text-xl font-semibold text-gray-800">SpotKin Settings</h3>
                <button id="preferences-close" onclick="hidePreferencesModal();" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="p-6 space-y-6">
                <!-- Analysis Sensitivity -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-brain mr-2 text-indigo-600"></i>Analysis Sensitivity
                    </label>
                    <select id="analysis-sensitivity" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        <option value="low">Low - Only major changes</option>
                        <option value="medium" selected>Medium - Balanced detection</option>
                        <option value="high">High - Detect subtle changes</option>
                    </select>
                    <p class="text-xs text-gray-500 mt-1">Controls how sensitive the AI is to movement and changes</p>
                </div>

                <!-- Alert Types -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-3">
                        <i class="fas fa-bell mr-2 text-indigo-600"></i>Alert Types
                    </label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" id="alert-movement" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" checked>
                            <span class="ml-2 text-sm text-gray-700">Movement Detection</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="alert-safety" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" checked>
                            <span class="ml-2 text-sm text-gray-700">Safety Concerns</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="alert-unusual" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" checked>
                            <span class="ml-2 text-sm text-gray-700">Unusual Events</span>
                        </label>
                    </div>
                </div>

                <!-- Sound Alerts -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-volume-up mr-2 text-indigo-600"></i>Sound Alerts
                    </label>
                    <div class="flex items-center space-x-4">
                        <label class="flex items-center">
                            <input type="radio" name="sound-alerts" value="on" id="sound-on" class="border-gray-300 text-indigo-600 focus:ring-indigo-500" checked>
                            <span class="ml-2 text-sm text-gray-700">On</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="sound-alerts" value="off" id="sound-off" class="border-gray-300 text-indigo-600 focus:ring-indigo-500">
                            <span class="ml-2 text-sm text-gray-700">Off</span>
                        </label>
                    </div>
                </div>

                <!-- Monitoring Refresh Rate -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-clock mr-2 text-indigo-600"></i>Default Monitoring Interval
                    </label>
                    <select id="default-refresh-rate" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        <option value="5000">5 seconds</option>
                        <option value="10000" selected>10 seconds</option>
                        <option value="15000">15 seconds</option>
                        <option value="30000">30 seconds</option>
                        <option value="60000">1 minute</option>
                    </select>
                </div>

                <!-- Movement Threshold -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-running mr-2 text-indigo-600"></i>Movement Detection Threshold
                    </label>
                    <div class="flex items-center space-x-3">
                        <input type="range" id="movement-threshold" min="500" max="2000" value="1000" class="flex-1">
                        <span id="movement-threshold-value" class="text-sm text-gray-600 min-w-16">1000</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Lower values detect smaller movements</p>
                </div>

                <!-- Push Notifications -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-bell mr-2 text-indigo-600"></i>Push Notifications
                    </label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" id="notifications-enabled" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                            <span class="ml-2 text-sm text-gray-700">Enable push notifications</span>
                        </label>
                        <div id="notification-controls" class="ml-6 space-y-2 hidden">
                            <label class="flex items-center">
                                <input type="checkbox" id="notify-danger" class="rounded border-gray-300 text-red-600 focus:ring-red-500" checked>
                                <span class="ml-2 text-sm text-gray-700">Danger alerts (High priority)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="notify-safety" class="rounded border-gray-300 text-yellow-600 focus:ring-yellow-500" checked>
                                <span class="ml-2 text-sm text-gray-700">Safety concerns (Medium priority)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="notify-activity" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-sm text-gray-700">General activity (Low priority)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="notify-monitoring" class="rounded border-gray-300 text-green-600 focus:ring-green-500" checked>
                                <span class="ml-2 text-sm text-gray-700">Monitoring status changes</span>
                            </label>
                            <p class="text-xs text-gray-500 mt-2">Notifications require browser permission and work best when the app is installed.</p>
                            <button type="button" id="test-notification" class="mt-2 text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700">
                                Test Notification
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Monitoring Zones -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-vector-square mr-2 text-indigo-600"></i>Monitoring Zones
                    </label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" id="zones-enabled" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                            <span class="ml-2 text-sm text-gray-700">Enable zone-specific monitoring</span>
                        </label>
                        <div id="zone-controls" class="ml-6 space-y-1 hidden">
                            <button type="button" id="add-zone" class="text-sm text-indigo-600 hover:text-indigo-800">
                                <i class="fas fa-plus mr-1"></i>Add monitoring zone
                            </button>
                            <button type="button" id="clear-zones" class="text-sm text-red-600 hover:text-red-800 ml-4">
                                <i class="fas fa-trash mr-1"></i>Clear all zones
                            </button>
                            <div id="zone-list" class="mt-2 space-y-1">
                                <!-- Zone list will be populated here -->
                            </div>
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Focus AI analysis on specific areas of the camera view</p>
                </div>

                <!-- Setup Wizard Access -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-magic mr-2 text-indigo-600"></i>Setup Wizard
                    </label>
                    <p class="text-xs text-gray-500 mb-3">Rerun the initial setup wizard to reconfigure your monitoring preferences</p>
                    <button type="button" id="rerun-setup-wizard" class="bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 text-sm">
                        <i class="fas fa-magic mr-2"></i>Run Setup Wizard
                    </button>
                </div>

                <!-- Background Sync -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-sync mr-2 text-indigo-600"></i>Background Sync
                    </label>
                    <p class="text-xs text-gray-500 mb-3">Manage offline data synchronization and queued operations</p>
                    
                    <!-- Sync Status Display -->
                    <div id="sync-status-display" class="mb-3 p-3 bg-gray-50 rounded-md">
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-600">Sync Status:</span>
                            <span id="sync-status-indicator" class="text-sm font-medium text-green-600">
                                <i class="fas fa-check-circle mr-1"></i>Up to date
                            </span>
                        </div>
                        <div class="mt-2 text-xs text-gray-500">
                            <div>Queued snapshots: <span id="queue-snapshots">0</span></div>
                            <div>Queued timeline events: <span id="queue-timeline">0</span></div>
                            <div>Queued alerts: <span id="queue-alerts">0</span></div>
                            <div>Queued preferences: <span id="queue-preferences">0</span></div>
                        </div>
                    </div>

                    <!-- Sync Controls -->
                    <div class="space-y-2">
                        <button type="button" id="manual-sync-btn" class="w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 text-sm">
                            <i class="fas fa-sync mr-2"></i>Sync Now
                        </button>
                        <button type="button" id="view-sync-details-btn" class="w-full bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 text-sm">
                            <i class="fas fa-list mr-2"></i>View Sync Details
                        </button>
                        <button type="button" id="clear-sync-queue-btn" class="w-full bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 text-sm">
                            <i class="fas fa-trash mr-2"></i>Clear Sync Queue
                        </button>
                    </div>
                    
                    <!-- Sync Options -->
                    <div class="mt-4 space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" id="auto-sync-enabled" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500" checked>
                            <span class="ml-2 text-sm text-gray-700">Auto-sync when online</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="wifi-only-sync" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                            <span class="ml-2 text-sm text-gray-700">Sync only on WiFi</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" id="battery-saver-sync" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                            <span class="ml-2 text-sm text-gray-700">Enable battery saver mode</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-end space-x-3 p-6 border-t bg-gray-50">
                <button id="preferences-reset" class="px-4 py-2 text-gray-600 hover:text-gray-800">
                    Reset to Default
                </button>
                <button id="preferences-save" onclick="savePreferences(); hidePreferencesModal();" class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700">
                    Save Settings
                </button>
            </div>
        </div>
    </div>

    <!-- Setup Wizard Modal -->
    <div id="setup-wizard" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-full overflow-y-auto">
            <!-- Wizard Header -->
            <div class="flex justify-between items-center p-6 border-b">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <i class="fas fa-magic mr-3 text-indigo-600"></i>
                        Welcome to SpotKin
                    </h2>
                    <p class="text-gray-600 mt-1">Let's set up your intelligent monitoring system</p>
                </div>
                <button id="setup-wizard-close" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <!-- Wizard Progress -->
            <div class="px-6 pt-4">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center space-x-4">
                        <div id="step-1-indicator" class="flex items-center justify-center w-8 h-8 rounded-full bg-indigo-600 text-white font-semibold">1</div>
                        <div class="w-16 h-1 bg-gray-300" id="progress-1-2"></div>
                        <div id="step-2-indicator" class="flex items-center justify-center w-8 h-8 rounded-full bg-gray-300 text-gray-500 font-semibold">2</div>
                        <div class="w-16 h-1 bg-gray-300" id="progress-2-3"></div>
                        <div id="step-3-indicator" class="flex items-center justify-center w-8 h-8 rounded-full bg-gray-300 text-gray-500 font-semibold">3</div>
                        <div class="w-16 h-1 bg-gray-300" id="progress-3-4"></div>
                        <div id="step-4-indicator" class="flex items-center justify-center w-8 h-8 rounded-full bg-gray-300 text-gray-500 font-semibold">4</div>
                    </div>
                    <span id="progress-text" class="text-sm text-gray-500">Step 1 of 4</span>
                </div>
            </div>

            <!-- Step 1: Welcome & Purpose -->
            <div id="setup-step-1" class="setup-step p-6">
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">üë∂üêæ</div>
                    <h3 class="text-xl font-semibold mb-2">What would you like to monitor?</h3>
                    <p class="text-gray-600">Choose your primary monitoring purpose to optimize AI analysis</p>
                </div>

                <div class="grid md:grid-cols-2 gap-4 mb-6">
                    <label class="cursor-pointer">
                        <input type="radio" name="monitor-type" value="baby" class="sr-only">
                        <div class="monitor-type-card p-6 border-2 border-gray-200 rounded-lg hover:border-indigo-400 transition-colors">
                            <div class="text-center">
                                <i class="fas fa-baby text-4xl text-pink-500 mb-3"></i>
                                <h4 class="font-semibold text-lg">Baby Monitor</h4>
                                <p class="text-sm text-gray-600 mt-2">Monitor sleeping babies, detect crying, track movement patterns</p>
                            </div>
                        </div>
                    </label>
                    
                    <label class="cursor-pointer">
                        <input type="radio" name="monitor-type" value="pet" class="sr-only">
                        <div class="monitor-type-card p-6 border-2 border-gray-200 rounded-lg hover:border-indigo-400 transition-colors">
                            <div class="text-center">
                                <i class="fas fa-paw text-4xl text-amber-500 mb-3"></i>
                                <h4 class="font-semibold text-lg">Pet Monitor</h4>
                                <p class="text-sm text-gray-600 mt-2">Watch pets, detect unusual behavior, monitor activity levels</p>
                            </div>
                        </div>
                    </label>
                </div>

                <div class="mb-4">
                    <label class="cursor-pointer">
                        <input type="radio" name="monitor-type" value="general" class="sr-only">
                        <div class="monitor-type-card p-4 border-2 border-gray-200 rounded-lg hover:border-indigo-400 transition-colors">
                            <div class="flex items-center">
                                <i class="fas fa-home text-2xl text-blue-500 mr-4"></i>
                                <div>
                                    <h4 class="font-semibold">General Security</h4>
                                    <p class="text-sm text-gray-600">Monitor general areas, detect motion and unusual activities</p>
                                </div>
                            </div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Step 2: Camera Setup -->
            <div id="setup-step-2" class="setup-step p-6 hidden">
                <div class="text-center mb-6">
                    <i class="fas fa-camera text-5xl text-indigo-600 mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">Camera Setup</h3>
                    <p class="text-gray-600">Position your camera for optimal monitoring</p>
                </div>

                <div class="bg-blue-50 p-4 rounded-lg mb-6">
                    <h4 class="font-semibold text-blue-800 mb-2">üìç Camera Positioning Tips</h4>
                    <ul class="text-sm text-blue-700 space-y-1" id="positioning-tips">
                        <!-- Tips will be populated based on monitor type -->
                    </ul>
                </div>

                <div class="bg-gray-100 p-4 rounded-lg mb-6">
                    <h4 class="font-semibold mb-2">Camera Preview</h4>
                    <div class="bg-gray-300 aspect-video rounded-lg flex items-center justify-center">
                        <div id="wizard-camera-preview" class="text-gray-500">
                            <i class="fas fa-camera text-4xl mb-2"></i>
                            <p>Camera preview will appear here</p>
                        </div>
                    </div>
                    <div class="flex justify-between mt-2">
                        <button id="wizard-start-camera" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">
                            <i class="fas fa-video mr-2"></i>Start Camera
                        </button>
                        <button id="wizard-switch-camera" class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400">
                            <i class="fas fa-sync-alt mr-2"></i>Switch Camera
                        </button>
                    </div>
                </div>

                <div class="bg-yellow-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-yellow-800 mb-2">üí° Pro Tips</h4>
                    <ul class="text-sm text-yellow-700 space-y-1">
                        <li>‚Ä¢ Ensure good lighting for better AI analysis</li>
                        <li>‚Ä¢ Avoid backlighting (bright windows behind subject)</li>
                        <li>‚Ä¢ Keep the camera stable to reduce false motion alerts</li>
                        <li>‚Ä¢ Test different angles to find the best view</li>
                    </ul>
                </div>
            </div>

            <!-- Step 3: Monitoring Zones -->
            <div id="setup-step-3" class="setup-step p-6 hidden">
                <div class="text-center mb-6">
                    <i class="fas fa-vector-square text-5xl text-indigo-600 mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">Set Monitoring Zones</h3>
                    <p class="text-gray-600">Focus AI analysis on specific areas</p>
                </div>

                <div class="bg-green-50 p-4 rounded-lg mb-4">
                    <p class="text-sm text-green-700">
                        <i class="fas fa-info-circle mr-2"></i>
                        Draw rectangles on the camera view to define areas where you want focused monitoring
                    </p>
                </div>

                <div class="bg-gray-100 p-4 rounded-lg mb-4">
                    <div class="bg-gray-300 aspect-video rounded-lg flex items-center justify-center relative" id="wizard-zone-container">
                        <div class="text-gray-500 text-center">
                            <i class="fas fa-draw-polygon text-4xl mb-2"></i>
                            <p>Click and drag to draw monitoring zones</p>
                        </div>
                        <canvas id="wizard-zone-canvas" class="absolute inset-0 w-full h-full"></canvas>
                    </div>
                    <div class="flex justify-between mt-2">
                        <button id="wizard-add-zone" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                            <i class="fas fa-plus mr-2"></i>Add Zone
                        </button>
                        <button id="wizard-clear-zones" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
                            <i class="fas fa-trash mr-2"></i>Clear All
                        </button>
                    </div>
                </div>

                <div class="text-center">
                    <label class="inline-flex items-center">
                        <input type="checkbox" id="skip-zones" class="form-checkbox">
                        <span class="ml-2 text-sm text-gray-600">Skip zones - monitor entire view</span>
                    </label>
                </div>
            </div>

            <!-- Step 4: Alert Preferences -->
            <div id="setup-step-4" class="setup-step p-6 hidden">
                <div class="text-center mb-6">
                    <i class="fas fa-bell text-5xl text-indigo-600 mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">Alert Preferences</h3>
                    <p class="text-gray-600">Configure when and how you want to be notified</p>
                </div>

                <div class="space-y-6">
                    <!-- Alert Sensitivity -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-brain mr-2 text-indigo-600"></i>AI Sensitivity
                        </label>
                        <select id="wizard-sensitivity" class="w-full border border-gray-300 rounded-md px-3 py-2">
                            <option value="low">Low - Only major events</option>
                            <option value="medium" selected>Medium - Balanced detection</option>
                            <option value="high">High - Detect subtle changes</option>
                        </select>
                    </div>

                    <!-- Alert Types -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">
                            <i class="fas fa-exclamation-triangle mr-2 text-indigo-600"></i>Alert Types
                        </label>
                        <div class="space-y-2" id="wizard-alert-types">
                            <!-- Alert types will be populated based on monitor type -->
                        </div>
                    </div>

                    <!-- Notification Preferences -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">
                            <i class="fas fa-bell mr-2 text-indigo-600"></i>Notification Methods
                        </label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="wizard-sound-alerts" class="form-checkbox" checked>
                                <span class="ml-2 text-sm">Sound alerts</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="wizard-push-notifications" class="form-checkbox">
                                <span class="ml-2 text-sm">Push notifications (requires permission)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="wizard-visual-alerts" class="form-checkbox" checked>
                                <span class="ml-2 text-sm">Visual indicators</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="bg-indigo-50 p-4 rounded-lg mt-6">
                    <h4 class="font-semibold text-indigo-800 mb-2">üéØ You're Almost Ready!</h4>
                    <p class="text-sm text-indigo-700">
                        After completing setup, you'll be able to start monitoring immediately. 
                        You can always adjust these settings later in the preferences menu.
                    </p>
                </div>
            </div>

            <!-- Wizard Footer -->
            <div class="flex justify-between items-center p-6 border-t bg-gray-50">
                <button id="setup-prev" class="px-4 py-2 text-gray-600 hover:text-gray-800 hidden">
                    <i class="fas fa-arrow-left mr-2"></i>Previous
                </button>
                <div class="flex space-x-3">
                    <button id="setup-skip" class="px-4 py-2 text-gray-500 hover:text-gray-700">
                        Skip Setup
                    </button>
                    <button id="setup-next" class="bg-indigo-600 text-white px-6 py-2 rounded-md hover:bg-indigo-700">
                        Next <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                    <button id="setup-finish" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 hidden">
                        <i class="fas fa-check mr-2"></i>Start Monitoring
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Help & Documentation Modal -->
    <div id="help-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-full overflow-y-auto">
            <!-- Help Header -->
            <div class="flex justify-between items-center p-6 border-b">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800 flex items-center">
                        <i class="fas fa-question-circle mr-3 text-blue-600"></i>
                        SpotKin Help & Documentation
                    </h2>
                    <p class="text-gray-600 mt-1">Everything you need to know about using SpotKin</p>
                </div>
                <button id="help-modal-close" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>

            <!-- Help Navigation -->
            <div class="flex border-b">
                <button id="help-tab-getting-started" data-tab="getting-started" class="help-tab px-6 py-3 border-b-2 border-blue-600 text-blue-600 font-medium">Getting Started</button>
                <button id="help-tab-features" data-tab="features" class="help-tab px-6 py-3 border-b-2 border-transparent text-gray-500 font-medium">Features</button>
                <button id="help-tab-setup" data-tab="setup" class="help-tab px-6 py-3 border-b-2 border-transparent text-gray-500 font-medium">Setup Guide</button>
                <button id="help-tab-troubleshooting" data-tab="troubleshooting" class="help-tab px-6 py-3 border-b-2 border-transparent text-gray-500 font-medium">Troubleshooting</button>
                <button id="help-tab-faq" data-tab="faq" class="help-tab px-6 py-3 border-b-2 border-transparent text-gray-500 font-medium">FAQ</button>
            </div>

            <!-- Help Content -->
            <div class="p-6">
                <!-- Getting Started Tab -->
                <div id="help-content-getting-started" class="help-content">
                    <div class="prose max-w-none">
                        <h3 class="text-xl font-semibold mb-4 flex items-center">
                            <i class="fas fa-play-circle mr-2 text-green-600"></i>
                            Getting Started with SpotKin
                        </h3>
                        
                        <div class="bg-blue-50 p-4 rounded-lg mb-6">
                            <h4 class="font-semibold text-blue-800 mb-2">üöÄ Quick Start</h4>
                            <ol class="text-sm text-blue-700 space-y-1">
                                <li>1. Run the Setup Wizard (appears on first visit)</li>
                                <li>2. Choose your monitoring type (Baby, Pet, or General Security)</li>
                                <li>3. Position your camera and test the view</li>
                                <li>4. Configure alert preferences</li>
                                <li>5. Start monitoring!</li>
                            </ol>
                        </div>

                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div class="bg-pink-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-pink-800 mb-2">üë∂ Baby Monitoring</h4>
                                <ul class="text-sm text-pink-700 space-y-1">
                                    <li>‚Ä¢ Detects crying and movement patterns</li>
                                    <li>‚Ä¢ Monitors sleep positions and safety</li>
                                    <li>‚Ä¢ Alerts for unusual stillness or activity</li>
                                    <li>‚Ä¢ Focuses on faces and chest movement</li>
                                </ul>
                            </div>
                            
                            <div class="bg-amber-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-amber-800 mb-2">üêæ Pet Monitoring</h4>
                                <ul class="text-sm text-amber-700 space-y-1">
                                    <li>‚Ä¢ Tracks activity levels and behavior</li>
                                    <li>‚Ä¢ Detects distress sounds and calls</li>
                                    <li>‚Ä¢ Monitors restricted area access</li>
                                    <li>‚Ä¢ Identifies destructive or unusual behavior</li>
                                </ul>
                            </div>
                        </div>

                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-gray-800 mb-2">üì± PWA Features</h4>
                            <p class="text-sm text-gray-600 mb-2">SpotKin works as a Progressive Web App with these benefits:</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>‚Ä¢ Install on your phone's home screen for quick access</li>
                                <li>‚Ä¢ Receive push notifications even when the app is closed</li>
                                <li>‚Ä¢ Works offline for basic functionality and settings</li>
                                <li>‚Ä¢ Automatic updates and caching for better performance</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Features Tab -->
                <div id="help-content-features" class="help-content hidden">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-star mr-2 text-yellow-600"></i>
                        Core Features
                    </h3>
                    
                    <div class="space-y-6">
                        <div class="border-l-4 border-indigo-500 pl-4">
                            <h4 class="font-semibold mb-2">üß† AI Scene Analysis</h4>
                            <p class="text-gray-600 text-sm mb-2">Advanced computer vision that understands context, not just motion:</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>‚Ä¢ Semantic understanding of activities and behaviors</li>
                                <li>‚Ä¢ Context-aware prompts that adapt to your monitoring type</li>
                                <li>‚Ä¢ 10-point severity classification system</li>
                                <li>‚Ä¢ Multi-frame temporal analysis for accurate detection</li>
                            </ul>
                        </div>

                        <div class="border-l-4 border-green-500 pl-4">
                            <h4 class="font-semibold mb-2">üìç Interactive Monitoring Zones</h4>
                            <p class="text-gray-600 text-sm mb-2">Focus AI analysis on specific areas:</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>‚Ä¢ Draw custom zones on your camera view</li>
                                <li>‚Ä¢ Multiple zone support for comprehensive coverage</li>
                                <li>‚Ä¢ Visual indicators show zone boundaries</li>
                                <li>‚Ä¢ Easy zone editing and management</li>
                            </ul>
                        </div>

                        <div class="border-l-4 border-red-500 pl-4">
                            <h4 class="font-semibold mb-2">üö® Smart Alert System</h4>
                            <p class="text-gray-600 text-sm mb-2">Intelligent notifications that reduce false alarms:</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>‚Ä¢ Tiered alert levels (Info, Warning, Critical)</li>
                                <li>‚Ä¢ Customizable sound patterns for different severities</li>
                                <li>‚Ä¢ Push notification support with user preferences</li>
                                <li>‚Ä¢ Alert cooldown periods to prevent notification spam</li>
                            </ul>
                        </div>

                        <div class="border-l-4 border-purple-500 pl-4">
                            <h4 class="font-semibold mb-2">üìä Event History & Timeline</h4>
                            <p class="text-gray-600 text-sm mb-2">Comprehensive monitoring history:</p>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>‚Ä¢ Chronological timeline of all events</li>
                                <li>‚Ä¢ Detailed analysis results for each event</li>
                                <li>‚Ä¢ Filterable and searchable history</li>
                                <li>‚Ä¢ Export capabilities for data analysis</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Setup Guide Tab -->
                <div id="help-content-setup" class="help-content hidden">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-cogs mr-2 text-blue-600"></i>
                        Detailed Setup Guide
                    </h3>

                    <div class="space-y-6">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-blue-800 mb-3">üìπ Camera Setup</h4>
                            <div class="text-sm text-blue-700 space-y-2">
                                <p><strong>Positioning Guidelines:</strong></p>
                                <ul class="space-y-1 ml-4">
                                    <li>‚Ä¢ Position camera 3-8 feet from the subject</li>
                                    <li>‚Ä¢ Ensure good lighting (avoid backlighting)</li>
                                    <li>‚Ä¢ Mount securely to prevent vibration</li>
                                    <li>‚Ä¢ Test different angles for optimal coverage</li>
                                </ul>
                                
                                <p class="mt-3"><strong>Camera Permissions:</strong></p>
                                <ul class="space-y-1 ml-4">
                                    <li>‚Ä¢ Allow camera access when prompted by browser</li>
                                    <li>‚Ä¢ Use "Switch Camera" to choose front/back camera</li>
                                    <li>‚Ä¢ Ensure stable internet connection for AI analysis</li>
                                </ul>
                            </div>
                        </div>

                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800 mb-3">üéØ Monitoring Zones</h4>
                            <div class="text-sm text-green-700 space-y-2">
                                <p><strong>Creating Zones:</strong></p>
                                <ol class="space-y-1 ml-4">
                                    <li>1. Click the "Zone Setup" button in camera controls</li>
                                    <li>2. Draw rectangles around areas of interest</li>
                                    <li>3. Multiple zones can be created for comprehensive coverage</li>
                                    <li>4. Zones can be edited or deleted anytime</li>
                                </ol>
                                
                                <p class="mt-3"><strong>Best Practices:</strong></p>
                                <ul class="space-y-1 ml-4">
                                    <li>‚Ä¢ Focus zones on key activity areas</li>
                                    <li>‚Ä¢ Avoid overlapping zones when possible</li>
                                    <li>‚Ä¢ Include enough context around subjects</li>
                                </ul>
                            </div>
                        </div>

                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-yellow-800 mb-3">‚öôÔ∏è Alert Configuration</h4>
                            <div class="text-sm text-yellow-700 space-y-2">
                                <p><strong>Sensitivity Settings:</strong></p>
                                <ul class="space-y-1 ml-4">
                                    <li>‚Ä¢ <strong>Low:</strong> Only major events and obvious changes</li>
                                    <li>‚Ä¢ <strong>Medium:</strong> Balanced detection (recommended)</li>
                                    <li>‚Ä¢ <strong>High:</strong> Sensitive to subtle movements and changes</li>
                                </ul>
                                
                                <p class="mt-3"><strong>Notification Options:</strong></p>
                                <ul class="space-y-1 ml-4">
                                    <li>‚Ä¢ Sound alerts with different patterns per severity</li>
                                    <li>‚Ä¢ Push notifications (requires browser permission)</li>
                                    <li>‚Ä¢ Visual indicators and on-screen alerts</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Troubleshooting Tab -->
                <div id="help-content-troubleshooting" class="help-content hidden">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-wrench mr-2 text-orange-600"></i>
                        Troubleshooting Guide
                    </h3>

                    <div class="space-y-4">
                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold text-red-700 mb-2">‚ùå Camera Not Working</h4>
                            <div class="text-sm text-gray-600 space-y-1">
                                <p><strong>Symptoms:</strong> Black screen, "Camera not available" message</p>
                                <p><strong>Solutions:</strong></p>
                                <ul class="ml-4 space-y-1">
                                    <li>‚Ä¢ Check browser permissions - allow camera access</li>
                                    <li>‚Ä¢ Close other applications using the camera</li>
                                    <li>‚Ä¢ Try refreshing the page</li>
                                    <li>‚Ä¢ Use "Switch Camera" to try different cameras</li>
                                    <li>‚Ä¢ Ensure you're using HTTPS or localhost</li>
                                </ul>
                            </div>
                        </div>

                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold text-orange-700 mb-2">‚ö†Ô∏è AI Analysis Failing</h4>
                            <div class="text-sm text-gray-600 space-y-1">
                                <p><strong>Symptoms:</strong> "Analysis failed" errors, no results</p>
                                <p><strong>Solutions:</strong></p>
                                <ul class="ml-4 space-y-1">
                                    <li>‚Ä¢ Check internet connection</li>
                                    <li>‚Ä¢ Ensure good lighting for better image quality</li>
                                    <li>‚Ä¢ Wait a moment and try again</li>
                                    <li>‚Ä¢ Refresh the page to reset connections</li>
                                </ul>
                            </div>
                        </div>

                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold text-blue-700 mb-2">üîï Notifications Not Working</h4>
                            <div class="text-sm text-gray-600 space-y-1">
                                <p><strong>Symptoms:</strong> No push notifications received</p>
                                <p><strong>Solutions:</strong></p>
                                <ul class="ml-4 space-y-1">
                                    <li>‚Ä¢ Check browser notification permissions</li>
                                    <li>‚Ä¢ Enable notifications in Settings panel</li>
                                    <li>‚Ä¢ Ensure PWA is installed for best notification support</li>
                                    <li>‚Ä¢ Check device notification settings</li>
                                    <li>‚Ä¢ Use "Test Notification" button to verify setup</li>
                                </ul>
                            </div>
                        </div>

                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold text-purple-700 mb-2">üì± PWA Installation Issues</h4>
                            <div class="text-sm text-gray-600 space-y-1">
                                <p><strong>Symptoms:</strong> No install prompt, PWA features not working</p>
                                <p><strong>Solutions:</strong></p>
                                <ul class="ml-4 space-y-1">
                                    <li>‚Ä¢ Use Chrome, Edge, or Safari for best PWA support</li>
                                    <li>‚Ä¢ Ensure you're using HTTPS (not file:// protocol)</li>
                                    <li>‚Ä¢ Look for install button in browser address bar</li>
                                    <li>‚Ä¢ On mobile: use "Add to Home Screen" from browser menu</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FAQ Tab -->
                <div id="help-content-faq" class="help-content hidden">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-question mr-2 text-purple-600"></i>
                        Frequently Asked Questions
                    </h3>

                    <div class="space-y-4">
                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold text-purple-700 mb-2">üîí Is my data private and secure?</h4>
                            <p class="text-sm text-gray-600">
                                Yes! SpotKin processes images locally when possible and uses secure connections for AI analysis. 
                                No video is stored permanently, and all user preferences are kept in your browser's local storage.
                            </p>
                        </div>

                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold text-purple-700 mb-2">üí° How accurate is the AI analysis?</h4>
                            <p class="text-sm text-gray-600">
                                SpotKin uses advanced AI models with context-aware prompts that achieve high accuracy for scene understanding. 
                                The multi-frame temporal analysis and severity classification system help reduce false positives while ensuring important events are detected.
                            </p>
                        </div>

                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold text-purple-700 mb-2">üîã Does SpotKin work offline?</h4>
                            <p class="text-sm text-gray-600">
                                The PWA features allow basic functionality offline, including settings access and cached content. 
                                However, AI analysis requires an internet connection. Notifications and monitoring history are preserved locally.
                            </p>
                        </div>

                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold text-purple-700 mb-2">üì± Can I use SpotKin on mobile devices?</h4>
                            <p class="text-sm text-gray-600">
                                Absolutely! SpotKin is designed as a mobile-first Progressive Web App. Install it on your phone's home screen 
                                for the best experience, including push notifications and offline capabilities.
                            </p>
                        </div>

                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold text-purple-700 mb-2">‚ö° How do I optimize performance?</h4>
                            <p class="text-sm text-gray-600">
                                For best performance: ensure good lighting, use a stable internet connection, position the camera to minimize 
                                unnecessary movement in the background, and adjust sensitivity settings based on your needs.
                            </p>
                        </div>

                        <div class="border rounded-lg p-4">
                            <h4 class="font-semibold text-purple-700 mb-2">üîÑ How often should I update SpotKin?</h4>
                            <p class="text-sm text-gray-600">
                                SpotKin automatically updates in the background as a PWA. When updates are available, you'll see a notification 
                                with an option to update immediately. We recommend accepting updates to get the latest features and improvements.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Help Footer -->
            <div class="flex justify-between items-center p-6 border-t bg-gray-50">
                <div class="text-sm text-gray-500">
                    Need more help? Check our <a href="#" class="text-blue-600 hover:text-blue-800">online documentation</a>
                </div>
                <button id="help-modal-close-btn" class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700">
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <!-- Performance Optimization: Lazy Loading Implementation -->
    <script>
        // Lazy load Puter.js after critical app initialization
        function loadPuterJS() {
            return new Promise((resolve, reject) => {
                if (window.puter) {
                    resolve(window.puter);
                    return;
                }
                
                const script = document.createElement('script');
                script.src = 'https://js.puter.com/v2/';
                script.async = true;
                script.onload = () => {
                    console.log('‚úÖ Puter.js loaded lazily');
                    resolve(window.puter);
                };
                script.onerror = () => {
                    console.log('‚ö†Ô∏è Puter.js failed to load, using mock AI');
                    reject(new Error('Puter.js load failed'));
                };
                document.head.appendChild(script);
            });
        }
        
        // Store the lazy loader globally for app.js
        window.loadPuterJS = loadPuterJS;
        
        // Performance optimization: Load critical app components
        window.addEventListener('DOMContentLoaded', () => {
            // Start loading Puter.js in background after DOM is ready
            setTimeout(() => {
                loadPuterJS().catch(() => {
                    console.log('üîÑ Puter.js lazy loading failed, app will use mock AI');
                });
            }, 100); // Small delay to prioritize critical rendering
        });
    </script>
    
    <!-- Performance Optimization: Module loader temporarily disabled for compatibility -->
    <!-- <script type="module" src="modules/module-loader.js"></script> -->
    
    <!-- Preference Migration System for version upgrades -->
    <script src="modules/preference-migration.js"></script>
    
    <!-- FAQ System for comprehensive user help -->
    <script src="modules/faq-system.js"></script>
    
    <!-- Feedback Collection System for user insights -->
    <script src="modules/feedback-collection.js"></script>
    
    <!-- Load main application after lazy loading setup -->
    <script src="app.js?v=fixed-save-function-v6"></script>
    
    <!-- PWA Service Worker Registration - DISABLED FOR DEVELOPMENT -->
    <script>
        // DEVELOPMENT: Disable service worker and clear all caches
        console.log('üö´ Service Worker disabled for development');
        
        if ('serviceWorker' in navigator) {
            // Unregister any existing service workers
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for(let registration of registrations) {
                    registration.unregister().then(() => {
                        console.log('üóëÔ∏è Service Worker unregistered');
                        // Force page reload after unregistration
                        if (registrations.length > 0) {
                            window.location.reload(true);
                        }
                    });
                }
            });
        }
        
        // Clear all caches
        if ('caches' in window) {
            caches.keys().then(function(cacheNames) {
                return Promise.all(
                    cacheNames.map(function(cacheName) {
                        console.log('üóëÔ∏è Deleting cache:', cacheName);
                        return caches.delete(cacheName);
                    })
                );
            }).then(() => {
                console.log('‚úÖ All caches cleared for development');
            });
        }
        
        // ORIGINAL SERVICE WORKER CODE (COMMENTED OUT FOR DEVELOPMENT)
        /*
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js', {
                    scope: './'
                }).then((registration) => {
                    console.log('üéâ PWA Service Worker registered successfully:', registration.scope);
                    
                    // Check for updates
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        console.log('üîÑ New service worker version found, installing...');
                        
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                // Show update notification
                                showUpdateNotification(registration);
                            }
                        });
                    });
                }).catch((error) => {
                    console.error('‚ùå Service Worker registration failed:', error);
                });
                
                // Listen for messages from service worker
                navigator.serviceWorker.addEventListener('message', (event) => {
                    console.log('üì® Message from service worker:', event.data);
                });
            });
        } else {
            console.warn('‚ö†Ô∏è Service Workers not supported in this browser');
        }
        */
        
        // Show PWA install prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('üí° PWA install prompt available');
            e.preventDefault(); // Prevent the mini-infobar from appearing
            deferredPrompt = e;
            
            // Show custom install button (you can customize this)
            showPWAInstallButton();
        });
        
        // Handle successful PWA installation
        window.addEventListener('appinstalled', (evt) => {
            console.log('üéâ PWA was successfully installed!');
            hidePWAInstallButton();
            
            // Track installation (optional analytics)
            if (typeof gtag !== 'undefined') {
                gtag('event', 'pwa_install', {
                    'event_category': 'engagement'
                });
            }
        });
        
        // Show update notification when new version is available
        function showUpdateNotification(registration) {
            const notification = document.createElement('div');
            notification.className = 'fixed bottom-4 left-4 right-4 bg-indigo-600 text-white p-4 rounded-lg shadow-lg z-50 flex items-center justify-between';
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-download mr-3"></i>
                    <div>
                        <p class="font-semibold">Update Available</p>
                        <p class="text-sm opacity-90">A new version of SpotKin is ready</p>
                    </div>
                </div>
                <div class="flex gap-2 ml-4">
                    <button onclick="updateApp()" class="bg-white text-indigo-600 px-3 py-1 rounded text-sm font-medium">
                        Update
                    </button>
                    <button onclick="this.closest('.fixed').remove()" class="text-indigo-200 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-remove after 30 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 30000);
            
            // Store registration for update function
            window.pendingRegistration = registration;
        }
        
        // Update app function
        function updateApp() {
            if (window.pendingRegistration && window.pendingRegistration.waiting) {
                window.pendingRegistration.waiting.postMessage({ type: 'SKIP_WAITING' });
                window.location.reload();
            }
        }
        
        // Show PWA install button
        function showPWAInstallButton() {
            const installButton = document.createElement('div');
            installButton.id = 'pwa-install-banner';
            installButton.className = 'fixed top-4 left-4 right-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 rounded-lg shadow-lg z-50 animate-pulse';
            installButton.innerHTML = `
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <i class="fas fa-mobile-alt mr-3 text-xl"></i>
                        <div>
                            <p class="font-semibold">Install SpotKin</p>
                            <p class="text-sm opacity-90">Add to your home screen for quick access</p>
                        </div>
                    </div>
                    <div class="flex gap-2 ml-4">
                        <button onclick="installPWA()" class="bg-white text-indigo-600 px-4 py-2 rounded font-medium">
                            Install
                        </button>
                        <button onclick="hidePWAInstallButton()" class="text-indigo-200 hover:text-white p-2">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(installButton);
        }
        
        // Install PWA function
        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('‚úÖ User accepted PWA install prompt');
                    } else {
                        console.log('‚ùå User dismissed PWA install prompt');
                    }
                    deferredPrompt = null;
                });
                
                hidePWAInstallButton();
            }
        }
        
        // Hide PWA install button
        function hidePWAInstallButton() {
            const installBanner = document.getElementById('pwa-install-banner');
            if (installBanner) {
                installBanner.remove();
            }
        }
        
        // Handle URL parameters for PWA shortcuts
        const urlParams = new URLSearchParams(window.location.search);
        const action = urlParams.get('action');
        
        if (action) {
            window.addEventListener('load', () => {
                setTimeout(() => {
                    switch (action) {
                        case 'snapshot':
                            if (typeof takeSnapshot === 'function') {
                                takeSnapshot();
                            }
                            break;
                        case 'monitor':
                            const monitorBtn = document.getElementById('toggle-monitoring');
                            if (monitorBtn && monitorBtn.textContent.includes('Start')) {
                                monitorBtn.click();
                            }
                            break;
                        case 'history':
                            const historyTab = document.getElementById('tab-history');
                            if (historyTab) {
                                historyTab.click();
                            }
                            break;
                    }
                }, 1000); // Wait for app to initialize
            });
        }
    </script>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-sm border-t border-gray-200 z-40 flex justify-around px-4 py-2 pb-3 transform translate-y-0 transition-transform duration-300 visible lg:hidden">
        <button class="mobile-nav-item flex flex-col items-center p-2 rounded-xl transition-all duration-200 min-w-14 active bg-indigo-600/10 text-indigo-600" data-target="#demo">
            <i class="fas fa-camera text-xl mb-1"></i>
            <span class="text-xs font-medium">Monitor</span>
        </button>
        <button class="mobile-nav-item flex flex-col items-center p-2 rounded-xl transition-all duration-200 min-w-14" data-target="#features">
            <i class="fas fa-star text-xl mb-1"></i>
            <span class="text-xs font-medium">Features</span>
        </button>
        <button class="mobile-nav-item flex flex-col items-center p-2 rounded-xl transition-all duration-200 min-w-14" data-target="#about">
            <i class="fas fa-info-circle text-xl mb-1"></i>
            <span class="text-xs font-medium">About</span>
        </button>
        <button class="mobile-nav-item flex flex-col items-center p-2 rounded-xl transition-all duration-200 min-w-14" id="mobile-setup-btn">
            <i class="fas fa-cog text-xl mb-1"></i>
            <span class="text-xs font-medium">Setup</span>
        </button>
        <button class="mobile-nav-item flex flex-col items-center p-2 rounded-xl transition-all duration-200 min-w-14" id="mobile-help-btn">
            <i class="fas fa-question-circle text-xl mb-1"></i>
            <span class="text-xs font-medium">Help</span>
        </button>
    </nav>
</body>
</html>
